# 快速开始

* [申请企业微信](#申请企业微信)
* [设置企业应用](#设置企业应用)
* [安装ESAP](#安装ESAP)
* [启动配置API](#启动配置API)
* [更改高级配置](#更改高级配置)

## 申请企业微信
* 首先到企业微信官网申请账号：[https://work.weixin.qq.com/](https://work.weixin.qq.com/)

## 设置企业应用
* 登陆你申请好的企业微信,进入【我的企业】，记录下`CorpID`

![](./img/s0-2.png)

* 进入【企业应用】--【添加应用】--【创建应用】,进入该应用记录下`AgentId`和`Secret`

* 点击【接收消息】--【设置】，可进入回调界面，暂停企业微信的设置，准备安装ESAP。

![](./img/s0-1.png)

## 安装ESAP
* 从ESAP项目首页：[https://erp8.net/esap/](./README.md)下载最新的服务器文件包。

* 解压下载的文件包，将其中`【微信提醒】`模板导入你的ES应用中。

> 注意，模板导入时可能会提示导入公式或工作流出错，这个是正常的，请无视。

## 启动配置API
* 双击esap.exe启动即可,首次启动后会自动进入配置界面，默认是:[localhost:9090/conf](https://localhost:9090/conf)

各参数配置示例如下：

![](./img/s0-3.png)

## 更改高级配置

* 完成首次配置保存后，会生成esap.yml配置文件，用Notepad++手工编辑可开启一些高级配置。

```yaml
 token: #你的企业号应用回调token，随意填写
 encodingAesKey: #你的企业号应用回调EncodingAesKey
 corpid: #你的企业号CorpID 
 secret: #你的管理组Secret
 port: 9090  #ESAP服务端口
 wxtxTitle: 【ESAP提醒】  #微信提醒标题
 wxqdtitle: "" #微信签到标题
 needWxOAuth2: false
 host: www.erp8.net #ESAP外网IP(域名)
 esweb: http://www.erp8.net:9999/esweb #ESweb外网页面
 server: . #数据库服务器，本机可填.号，完整示例：192.168.1.10/实例名,端口
 userId: sa #数据库用户名
 pwd: 123 #数据库密码
 dbName: esap #ES应用数据库，可以改成esapp1
 retrymsg: false  #微信提醒重发开关，为true时，发送失败的提醒将重发
 showfunclist: false #微信查询列表开关，为true时，查询未匹配时显示可用列表
 showfunclistenter: false #为true并且回调勾选了用户进入上报，则用户进入时显示可用列表
 debug: true #调试模式开关，为true时，log中输出调试详情
```

> 注意，不推荐用windows的记事本编辑，可能会导致无法读取配置
